!function(){"use strict";angular.module("AnyDayBuddyAds",["ui.router","ngMaterial","uiGmapgoogle-maps"])}(),function(){"use strict";angular.module("AnyDayBuddyAds").constant("_",window._).constant("Dropzone",window.Dropzone).constant("braintree",window.braintree).constant("baseApi","http://api.anydaybuddy.com")}(),function(){"use strict";function e(e,t,o){e.state("home",{url:"/",views:{main:{controller:"HomeController",controllerAs:"vm",templateUrl:"assets/views/home.html"}},authenticate:!1}).state("orders",{url:"/orders",views:{main:{controller:"OrdersController",controllerAs:"vm",templateUrl:"assets/views/orders.html"}},authenticate:!1}),t.otherwise("/")}angular.module("AnyDayBuddyAds").config(e),e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"]}(),function(){"use strict";function e(e){e.configure({key:"AIzaSyAonFuCDb7HjXUz0uocKbEGUJz91IL9EVs",libraries:"places"})}function t(e,t){e.definePalette("primary",{50:"#9dceda",100:"#65b2c5",200:"#429ab0",300:"#2f6d7c",400:"#265966",500:"#1e4650",600:"#16323a",700:"#0d1f23",800:"#050c0d",900:"#000000",A100:"#9dceda",A200:"#65b2c5",A400:"#265966",A700:"#0d1f23",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100 A200"}),e.definePalette("accent",{50:"#d0ebed",100:"#99d4d8",200:"#70c3c8",300:"#43a7ae",400:"#3a9298",500:"#327d82",600:"#29686c",700:"#215256",800:"#183d40",900:"#10282a",A100:"#d0ebed",A200:"#99d4d8",A400:"#3a9298",A700:"#215256",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 A100 A200"}),e.definePalette("warn",{50:"#faeee6",100:"#ecc3a7",200:"#e2a379",300:"#d57b3e",400:"#c96b2b",500:"#b05e26",600:"#975121",700:"#7e431b",800:"#643616",900:"#4b2810",A100:"#faeee6",A200:"#ecc3a7",A400:"#c96b2b",A700:"#7e431b",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 A100 A200"}),e.theme("default").primaryPalette("primary").accentPalette("accent").warnPalette("warn")}angular.module("AnyDayBuddyAds").config(t).config(e),e.$inject=["uiGmapGoogleMapApiProvider"],t.$inject=["$mdThemingProvider","$locationProvider"]}(),function(){"use strict";function e(){function e(e){return e}return e}angular.module("AnyDayBuddyAds").filter("filter",e)}(),function(){"use strict";function e(e){function t(){}var o=this;o.title="Home Controller",t()}angular.module("AnyDayBuddyAds").controller("HomeController",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(){function e(e,t,o,n){}var o={restrict:"EA",templateUrl:"assets/views/orders/orders.campaign.html",scope:{options:"=",form:"=",total:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return o}function t(e,t){function o(){}o()}angular.module("AnyDayBuddyAds").directive("adbOrdersCampaign",e),t.$inject=["$http","$q"]}(),function(){"use strict";function e(){function e(e,t,o,n){}var o={restrict:"EA",templateUrl:"assets/views/orders/orders.checkout.html",scope:{options:"=",form:"=",total:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return o}function t(e,t,o,n,r,i){function a(){i.getClientToken().then(function(e){console.log(e),c(e.clientToken)}).catch(function(e){console.log(e)})}function c(e){t.setup(e,"custom",{paypal:{container:"paypal-container",singleUse:!0,amount:10,currency:"USD",locale:"en_us",enableShippingAddress:!0},onPaymentMethodReceived:function(e){l(e.nonce)},onReady:function(e){s.checkout=e}})}function l(e){console.log(e)}var s=this;s.checkout={},a(),o.$watch("vm.checkout",function(e,t){e&&console.log(e)})}angular.module("AnyDayBuddyAds").directive("adbOrdersCheckout",e),t.$inject=["_","braintree","$scope","$http","$q","DataService"]}(),function(){"use strict";function e(){function e(e,t,o,n){}var o={restrict:"EA",templateUrl:"assets/views/orders/orders.customer.html",scope:{options:"=",form:"=",total:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return o}function t(e,t){function o(){}o()}angular.module("AnyDayBuddyAds").directive("adbOrdersCustomer",e),t.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t,o,n){function r(){n.getOptions().then(function(e){console.log(e),l.options.target=i(e),console.log(l.form)}).catch(function(e){console.log(e)})}function i(t){var o=function(t,n){return e.isObject(t)?e.merge({},t,n,o):t||n},n=e.flatten([{},t,o]);return e.merge.apply(e,n)}function a(e,t){o.show({fullscreen:!0,targetEvent:e,clickOutsideToClose:!0,templateUrl:"app/shared/layout/imageModal.html",locals:{image:t},controller:["$scope","image",function(e,t){e.image=t}]})}function c(){o.show({templateUrl:"app/components/ad/advertisementModal.html",clickOutsideToClose:!0,fullscreen:!0})}var l=this;l.openImage=a,l.add=c,l.total=0,l.options={target:{display:[],media:[],impressionsUnits:[],impressionsTime:[],distance:[],age:[],gender:[]}},l.form={media:{},options:{display:{},impressions:{},distance:{},age:{},gender:{}}},r(),t.$watch("vm.form",function(t,o){console.log(t),l.total=t.media.hasOwnProperty("fee")?t.media.fee:0,e.map(t.options,function(e){e.hasOwnProperty("fee")&&(l.total+=l.total*e.fee),e.hasOwnProperty("discount")&&(l.total-=l.total*e.discount)})},!0)}angular.module("AnyDayBuddyAds").controller("OrdersController",e),e.$inject=["_","$scope","$mdDialog","DataService"]}(),function(){"use strict";function e(){function e(e,t,o,n){}var o={restrict:"EA",templateUrl:"assets/views/orders/orders.display.html",scope:{options:"=",form:"=",total:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return o}function t(e,t,o,n,r,i){function a(){o.all([e,t.promise(1)]).then(function(e){var t=e[0],o=e[1][0].map;u.window={pixelOffset:new t.Size(0,(-40)),closeClick:function(){u.marker.show=!1}},f=new t.places.AutocompleteService,m=new t.DirectionsService,p=new t.DirectionsRenderer,u.map.instance=o,p.setMap(u.map.instance),d=new t.places.PlacesService(u.map.instance),u.placesReady=!0,console.log("ready")})}function c(e,t,o,n){console.log(t),r(function(){e.panTo(new google.maps.LatLng(t.latitude,t.longitude)),o&&e.panBy(0,-200)},100)}function l(e,t,o){var r=o[0],i=r.latLng.lat(),a=r.latLng.lng();u.marker={id:Date.now(),location:{latitude:i,longitude:a},show:!1},n.$apply()}function s(){console.log("bounds changed"),!u.map.instance}var u=this,d=null,p=null,m=null,f=null;u.control={uploading:!1},u.map={center:{latitude:45.50174502816667,longitude:-73.5703881829977},zoom:14,options:{scrollwheel:!0},mapMarker:!0,disableDefaultUI:!0,control:{},events:{click:l,idle:s}},u.info={name:"Venue name",address:"",icon:""},u.marker={id:0,location:{latitude:45.50174502816667,longitude:-73.5703881829977},show:!1},u.dropzone=i.create(function(e,t){n.$apply(function(){console.log(t.secure_url),u.control.uploading=!1})},function(){n.$apply(function(){u.control.uploading=!0})}),a(),u.clickMarker=function(){console.log("click"),u.marker.show=!u.marker.show,n.$apply()},u.autocompleteAddress=function(e){var t=o.defer();return f.getQueryPredictions({input:e},function(e){t.resolve(e?_.filter(e,"place_id"):[])}),t.promise},u.getPlace=function(){console.log(u.info.place),u.info.place&&d.getDetails({placeId:u.info.place.place_id},function(e,t){console.log(e,t),u.marker={id:Date.now(),name:e.name,location:{latitude:parseFloat(e.geometry.location.lat()),longitude:parseFloat(e.geometry.location.lng())},show:!0},c(u.map.instance,u.marker.location,null,!0),n.$apply()})}}angular.module("AnyDayBuddyAds").directive("adbDisplayChooser",e),t.$inject=["uiGmapGoogleMapApi","uiGmapIsReady","$q","$scope","$timeout","DropzoneService"]}(),function(){"use strict";function e(e,t,o){function n(){var n=t.defer();return e({method:"GET",url:o+"/advertisment/options/"}).success(function(e,t,o,r){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}function r(){var o=t.defer();return e({method:"GET",url:"http://localhost:1338/commerce/clientToken/"}).success(function(e,t,n,r){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise}var i={getOptions:n,getClientToken:r};return i}angular.module("AnyDayBuddyAds").service("DataService",e),e.$inject=["$http","$q","baseApi"]}(),function(){"use strict";function e(){function e(e,t,o){return{options:{url:"https://api.cloudinary.com/v1_1/cloud9/image/upload",uploadMultiple:!1,maxFiles:1,acceptedFiles:"image/*",dictDefaultMessage:"Drop file or click here to upload",addRemoveLinks:!0},eventHandlers:{sending:function(e,o,n){n.append("api_key",839988333153567),n.append("timestamp",Date.now()/1e3|0),n.append("upload_preset","sm2ev4nu"),t&&t()},success:e,removedfile:o}}}function t(e,t,o){return{options:{url:"https://api.cloudinary.com/v1_1/cloud9/image/upload",maxFiles:e,acceptedFiles:"image/*",dictDefaultMessage:"Drop files or click here to upload"},eventHandlers:{sending:function(e,t,n){n.append("api_key",839988333153567),n.append("timestamp",Date.now()/1e3|0),n.append("upload_preset","sm2ev4nu"),o&&o()},success:t}}}var o={create:e,createMultiple:t};return o}angular.module("AnyDayBuddyAds").service("DropzoneService",e)}(),function(){"use strict";function e(e,t,o){function n(){var e=$rootScope.currentUser;return!!e}function r(n){var r=o.defer();return t({method:"POST",url:e+"login",data:n}).success(function(e){$rootScope.currentUser=e.user,r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}var i={isLoggedIn:n,login:r};return i}angular.module("AnyDayBuddyAds").factory("userService",e),e.$inject=["API_URL","$http","$q"]}(),function(){"use strict";function e(){var e={restrict:"EA",templateUrl:"assets/views/header/header.html",controller:t,controllerAs:"vm",bindToController:!0};return e}function t(){function e(){console.log("header Activated")}e()}angular.module("AnyDayBuddyAds").directive("headerDirective",e),t.$inject=[]}(),function(){"use strict";function e(){var e={restrict:"EA",templateUrl:"assets/views/footer/footer.html",controller:t,controllerAs:"vm",bindToController:!0};return e}function t(){function e(){console.log("footer Activated")}e()}angular.module("AnyDayBuddyAds").directive("footerDirective",e),t.$inject=[]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uc3RhbnRzLmpzIiwiYXBwLnJvdXRlLmpzIiwiYXBwLmNvbmZpZy5qcyIsImZpbHRlcnMvZXhhbXBsZS5maWx0ZXIuanMiLCJtYWluL2hvbWUuY29udHJvbGxlci5qcyIsIm9yZGVycy9jYW1wYWlnbi5kaXJlY3RpdmUuanMiLCJvcmRlcnMvY2hlY2tvdXQuZGlyZWN0aXZlLmpzIiwib3JkZXJzL2N1c3RvbWVyLmRpcmVjdGl2ZS5qcyIsIm9yZGVycy9vcmRlcnMuY29udHJvbGxlci5qcyIsIm9yZGVycy91dGlscy5kaXNwbGF5LmRpcmVjdGl2ZS5qcyIsInNlcnZpY2VzL2RhdGEuc2VydmljZS5qcyIsInNlcnZpY2VzL2Ryb3B6b25lLnNlcnZpY2UuanMiLCJzZXJ2aWNlcy91c2VyLnNlcnZpY2UuanMiLCJjb21wb25lbnRzL2hlYWRlci9oZWFkZXIuZGlyZWN0aXZlLmpzIiwiY29tcG9uZW50cy9mb290ZXIvZm9vdGVyLmRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJ3aW5kb3ciLCJfIiwiRHJvcHpvbmUiLCJicmFpbnRyZWUiLCJyb3V0ZXJQcm92aWRlciIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJzdGF0ZSIsInVybCIsInZpZXdzIiwibWFpbiIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJ0ZW1wbGF0ZVVybCIsImF1dGhlbnRpY2F0ZSIsIm90aGVyd2lzZSIsImNvbmZpZyIsIiRpbmplY3QiLCJtYXBzUHJvdmlkZXIiLCJ1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlciIsImNvbmZpZ3VyZSIsImtleSIsImxpYnJhcmllcyIsIiRtZFRoZW1pbmdQcm92aWRlciIsImRlZmluZVBhbGV0dGUiLCI1MCIsIjEwMCIsIjIwMCIsIjMwMCIsIjQwMCIsIjUwMCIsIjYwMCIsIjcwMCIsIjgwMCIsIjkwMCIsIkExMDAiLCJBMjAwIiwiQTQwMCIsIkE3MDAiLCJjb250cmFzdERlZmF1bHRDb2xvciIsImNvbnRyYXN0RGFya0NvbG9ycyIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2FyblBhbGV0dGUiLCJleGFtcGxlIiwiZXhhbXBsZUZpbHRlciIsInBhcmFtcyIsImZpbHRlciIsIkhvbWVDb250cm9sbGVyIiwiJHJvb3RTY29wZSIsImFjdGl2YXRlIiwidm0iLCJ0aGlzIiwidGl0bGUiLCJkaXJlY3RpdmUiLCJsaW5rRnVuYyIsInNjb3BlIiwiZWwiLCJhdHRyIiwiY3RybCIsInJlc3RyaWN0Iiwib3B0aW9ucyIsImZvcm0iLCJ0b3RhbCIsImxpbmsiLCJDb250cm9sbGVyIiwiYmluZFRvQ29udHJvbGxlciIsIiRodHRwIiwiJHEiLCIkc2NvcGUiLCJEYXRhU2VydmljZSIsImdldENsaWVudFRva2VuIiwidGhlbiIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJzZXR1cEdhdGV3YXkiLCJjbGllbnRUb2tlbiIsImNhdGNoIiwiZXJyIiwidG9rZW4iLCJzZXR1cCIsInBheXBhbCIsImNvbnRhaW5lciIsInNpbmdsZVVzZSIsImFtb3VudCIsImN1cnJlbmN5IiwibG9jYWxlIiwiZW5hYmxlU2hpcHBpbmdBZGRyZXNzIiwib25QYXltZW50TWV0aG9kUmVjZWl2ZWQiLCJvYmoiLCJkb1NvbWV0aGluZ1dpdGhUaGVOb25jZSIsIm5vbmNlIiwib25SZWFkeSIsImludGVncmF0aW9uIiwiY2hlY2tvdXQiLCIkd2F0Y2giLCJjIiwibyIsIiRtZERpYWxvZyIsImdldE9wdGlvbnMiLCJyZXNwIiwidGFyZ2V0IiwiZG9fbWVyZ2UiLCJyb2xlcyIsIm1lcmdlciIsImEiLCJiIiwiaXNPYmplY3QiLCJtZXJnZSIsImFyZ3MiLCJmbGF0dGVuIiwiYXBwbHkiLCJvcGVuSW1hZ2UiLCIkZXZlbnQiLCJpbWFnZSIsInNob3ciLCJmdWxsc2NyZWVuIiwidGFyZ2V0RXZlbnQiLCJjbGlja091dHNpZGVUb0Nsb3NlIiwibG9jYWxzIiwiYWRkIiwiZGlzcGxheSIsIm1lZGlhIiwiaW1wcmVzc2lvbnNVbml0cyIsImltcHJlc3Npb25zVGltZSIsImRpc3RhbmNlIiwiYWdlIiwiZ2VuZGVyIiwiaW1wcmVzc2lvbnMiLCJoYXNPd25Qcm9wZXJ0eSIsImZlZSIsIm1hcCIsIml0ZW0iLCJkaXNjb3VudCIsInVpR21hcEdvb2dsZU1hcEFwaSIsInVpR21hcElzUmVhZHkiLCIkdGltZW91dCIsIkRyb3B6b25lU2VydmljZSIsImFsbCIsInByb21pc2UiLCJyZXNwb25zZSIsImluc3RhbmNlIiwicGl4ZWxPZmZzZXQiLCJTaXplIiwiY2xvc2VDbGljayIsIm1hcmtlciIsIlBsYWNlc0F1dG9jb21wbGV0ZSIsInBsYWNlcyIsIkF1dG9jb21wbGV0ZVNlcnZpY2UiLCJEaXJlY3Rpb25zU2VydmljZSIsIkRpcmVjdGlvblJlbmRlcmVyIiwiRGlyZWN0aW9uc1JlbmRlcmVyIiwic2V0TWFwIiwiUGxhY2VzIiwiUGxhY2VzU2VydmljZSIsInBsYWNlc1JlYWR5IiwiY2VudGVyTWFwIiwibG9jYXRpb24iLCJvZmZzZXQiLCJzY3JvbGwiLCJwYW5UbyIsImdvb2dsZSIsIm1hcHMiLCJMYXRMbmciLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsInBhbkJ5IiwiY2xpY2tNYXAiLCJldmVudE5hbWUiLCJvcmlnaW5hbEV2ZW50QXJncyIsImUiLCJsYXQiLCJsYXRMbmciLCJsb24iLCJsbmciLCJpZCIsIkRhdGUiLCJub3ciLCIkYXBwbHkiLCJib3VuZHNDaGFuZ2VkIiwiY29udHJvbCIsInVwbG9hZGluZyIsImNlbnRlciIsInpvb20iLCJzY3JvbGx3aGVlbCIsIm1hcE1hcmtlciIsImRpc2FibGVEZWZhdWx0VUkiLCJldmVudHMiLCJjbGljayIsImlkbGUiLCJpbmZvIiwibmFtZSIsImFkZHJlc3MiLCJpY29uIiwiZHJvcHpvbmUiLCJjcmVhdGUiLCJmaWxlIiwic2VjdXJlX3VybCIsImNsaWNrTWFya2VyIiwiYXV0b2NvbXBsZXRlQWRkcmVzcyIsImRlZmVycmVkIiwiZGVmZXIiLCJnZXRRdWVyeVByZWRpY3Rpb25zIiwiaW5wdXQiLCJkYXRhIiwicmVzb2x2ZSIsImdldFBsYWNlIiwicGxhY2UiLCJnZXREZXRhaWxzIiwicGxhY2VJZCIsInBsYWNlX2lkIiwic3RhdHVzIiwicGFyc2VGbG9hdCIsImdlb21ldHJ5IiwiZGF0YVNlcnZpY2UiLCJiYXNlQXBpIiwibWV0aG9kIiwic3VjY2VzcyIsImhlYWRlcnMiLCJlcnJvciIsInJlamVjdCIsInNlcnZpY2UiLCJzZW5kaW5nIiwicmVtb3ZlZGZpbGUiLCJ1cGxvYWRNdWx0aXBsZSIsIm1heEZpbGVzIiwiYWNjZXB0ZWRGaWxlcyIsImRpY3REZWZhdWx0TWVzc2FnZSIsImFkZFJlbW92ZUxpbmtzIiwiZXZlbnRIYW5kbGVycyIsInhociIsImZvcm1EYXRhIiwiYXBwZW5kIiwiY3JlYXRlTXVsdGlwbGUiLCJ1c2VyU2VydmljZSIsIkFQSV9VUkwiLCJpc0xvZ2dlZEluIiwidXNlciIsImN1cnJlbnRVc2VyIiwibG9naW4iLCJmYWN0b3J5IiwiaGVhZGVyRGlyZWN0aXZlIiwiaGVhZGVyQ29udHJvbGxlciIsImZvb3RlckRpcmVjdGl2ZSIsImZvb3RlckNvbnRyb2xsZXIiXSwibWFwcGluZ3MiOiJDQVNBLFdBQ0EsWUFFQUEsU0FDQUMsT0FBQSxrQkFDQSxZQUNBLGFBQ0EseUJDaEJBLFdBQ0EsWUFFQUQsU0FDQUMsT0FBQSxrQkFDQUMsU0FBQSxJQUFBQyxPQUFBQyxHQUNBRixTQUFBLFdBQUFDLE9BQUFFLFVBQ0FILFNBQUEsWUFBQUMsT0FBQUcsV0FDQUosU0FBQSxVQUFBLGlDQ1JBLFdBQ0EsWUFRQSxTQUFBSyxHQUFBQyxFQUFBQyxFQUFBQyxHQU1BRixFQUNBRyxNQUFBLFFBQ0FDLElBQUEsSUFDQUMsT0FDQUMsTUFDQUMsV0FBQSxpQkFDQUMsYUFBQSxLQUNBQyxZQUFBLDJCQUdBQyxjQUFBLElBRUFQLE1BQUEsVUFDQUMsSUFBQSxVQUNBQyxPQUNBQyxNQUNBQyxX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IEBuYW1lIEFueURheUJ1ZGR5QWRzXG4gKiBAcmVxdWlyZXMgdWkucm91dGVyXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBBbmd1bGFySlMgYmFzaWMgYXBwIHRlbXBsYXRlXG4gKlxuICovXG4oZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnQW55RGF5QnVkZHlBZHMnLCBbXG4gICAgICAndWkucm91dGVyJyxcbiAgICAgICduZ01hdGVyaWFsJyxcbiAgICAgICd1aUdtYXBnb29nbGUtbWFwcycsXG4gICAgXSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnQW55RGF5QnVkZHlBZHMnKVxuICAgIC5jb25zdGFudCgnXycsIHdpbmRvdy5fKVxuICAgIC5jb25zdGFudCgnRHJvcHpvbmUnLCB3aW5kb3cuRHJvcHpvbmUpXG4gICAgLmNvbnN0YW50KCdicmFpbnRyZWUnLCB3aW5kb3cuYnJhaW50cmVlKVxuICAgIC5jb25zdGFudCgnYmFzZUFwaScsICdodHRwOi8vYXBpLmFueWRheWJ1ZGR5LmNvbScpO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdBbnlEYXlCdWRkeUFkcycpXG4gICAgLmNvbmZpZyhyb3V0ZXJQcm92aWRlcik7XG5cbiAgcm91dGVyUHJvdmlkZXIuJGluamVjdCA9IFsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJ107XG5cbiAgZnVuY3Rpb24gcm91dGVyUHJvdmlkZXIoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAvLyAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoe1xuICAgIC8vICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAvLyAgIHJlcXVpcmVCYXNlOiBmYWxzZVxuICAgIC8vIH0pO1xuICAgIC8vXG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgdXJsOiAnLycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ21haW4nOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnSG9tZUNvbnRyb2xsZXInLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhc3NldHMvdmlld3MvaG9tZS5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXV0aGVudGljYXRlOiBmYWxzZVxuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnb3JkZXJzJywge1xuICAgICAgICB1cmw6ICcvb3JkZXJzJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnbWFpbic6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdPcmRlcnNDb250cm9sbGVyJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXNzZXRzL3ZpZXdzL29yZGVycy5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXV0aGVudGljYXRlOiBmYWxzZVxuICAgICAgfSk7XG5cbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG4gIH1cblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnQW55RGF5QnVkZHlBZHMnKVxuICAgIC5jb25maWcoY29uZmlnKVxuICAgIC5jb25maWcobWFwc1Byb3ZpZGVyKTtcblxuICAgIG1hcHNQcm92aWRlci4kaW5qZWN0ID0gWyd1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlciddO1xuXG4gICAgZnVuY3Rpb24gbWFwc1Byb3ZpZGVyKHVpR21hcEdvb2dsZU1hcEFwaVByb3ZpZGVyKSB7XG4gICAgICB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlci5jb25maWd1cmUoe1xuICAgICAgICBrZXk6ICdBSXphU3lBb25GdUNEYjdIalhVejB1b2NLYkVHVUp6OTFJTDlFVnMnLCAvL2FkYi1zaXRlLTAga2V5XG4gICAgICAgIC8vIGtleTogJ0FJemFTeUFsVzZodW43VndwRlB2MGZ4X0tPVWg1MmwwOEJScGpZTScsXG4gICAgICAgIGxpYnJhcmllczogJ3BsYWNlcydcbiAgICAgIH0pO1xuICAgIH1cblxuICBjb25maWcuJGluamVjdCA9IFsnJG1kVGhlbWluZ1Byb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJ107XG5cbiAgZnVuY3Rpb24gY29uZmlnKCRtZFRoZW1pbmdQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcblxuICAgICRtZFRoZW1pbmdQcm92aWRlci5kZWZpbmVQYWxldHRlKCdwcmltYXJ5Jywge1xuICAgICAgJzUwJzogJyM5ZGNlZGEnLFxuICAgICAgJzEwMCc6ICcjNjViMmM1JyxcbiAgICAgICcyMDAnOiAnIzQyOWFiMCcsXG4gICAgICAnMzAwJzogJyMyZjZkN2MnLFxuICAgICAgJzQwMCc6ICcjMjY1OTY2JyxcbiAgICAgICc1MDAnOiAnIzFlNDY1MCcsXG4gICAgICAnNjAwJzogJyMxNjMyM2EnLFxuICAgICAgJzcwMCc6ICcjMGQxZjIzJyxcbiAgICAgICc4MDAnOiAnIzA1MGMwZCcsXG4gICAgICAnOTAwJzogJyMwMDAwMDAnLFxuICAgICAgJ0ExMDAnOiAnIzlkY2VkYScsXG4gICAgICAnQTIwMCc6ICcjNjViMmM1JyxcbiAgICAgICdBNDAwJzogJyMyNjU5NjYnLFxuICAgICAgJ0E3MDAnOiAnIzBkMWYyMycsXG4gICAgICAnY29udHJhc3REZWZhdWx0Q29sb3InOiAnbGlnaHQnLFxuICAgICAgJ2NvbnRyYXN0RGFya0NvbG9ycyc6ICc1MCAxMDAgMjAwIEExMDAgQTIwMCdcbiAgICB9KTtcbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIuZGVmaW5lUGFsZXR0ZSgnYWNjZW50Jywge1xuICAgICAgJzUwJzogJyNkMGViZWQnLFxuICAgICAgJzEwMCc6ICcjOTlkNGQ4JyxcbiAgICAgICcyMDAnOiAnIzcwYzNjOCcsXG4gICAgICAnMzAwJzogJyM0M2E3YWUnLFxuICAgICAgJzQwMCc6ICcjM2E5Mjk4JyxcbiAgICAgICc1MDAnOiAnIzMyN2Q4MicsXG4gICAgICAnNjAwJzogJyMyOTY4NmMnLFxuICAgICAgJzcwMCc6ICcjMjE1MjU2JyxcbiAgICAgICc4MDAnOiAnIzE4M2Q0MCcsXG4gICAgICAnOTAwJzogJyMxMDI4MmEnLFxuICAgICAgJ0ExMDAnOiAnI2QwZWJlZCcsXG4gICAgICAnQTIwMCc6ICcjOTlkNGQ4JyxcbiAgICAgICdBNDAwJzogJyMzYTkyOTgnLFxuICAgICAgJ0E3MDAnOiAnIzIxNTI1NicsXG4gICAgICAnY29udHJhc3REZWZhdWx0Q29sb3InOiAnbGlnaHQnLFxuICAgICAgJ2NvbnRyYXN0RGFya0NvbG9ycyc6ICc1MCAxMDAgMjAwIDMwMCBBMTAwIEEyMDAnXG4gICAgfSk7XG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLmRlZmluZVBhbGV0dGUoJ3dhcm4nLCB7XG4gICAgICAnNTAnOiAnI2ZhZWVlNicsXG4gICAgICAnMTAwJzogJyNlY2MzYTcnLFxuICAgICAgJzIwMCc6ICcjZTJhMzc5JyxcbiAgICAgICczMDAnOiAnI2Q1N2IzZScsXG4gICAgICAnNDAwJzogJyNjOTZiMmInLFxuICAgICAgJzUwMCc6ICcjYjA1ZTI2JyxcbiAgICAgICc2MDAnOiAnIzk3NTEyMScsXG4gICAgICAnNzAwJzogJyM3ZTQzMWInLFxuICAgICAgJzgwMCc6ICcjNjQzNjE2JyxcbiAgICAgICc5MDAnOiAnIzRiMjgxMCcsXG4gICAgICAnQTEwMCc6ICcjZmFlZWU2JyxcbiAgICAgICdBMjAwJzogJyNlY2MzYTcnLFxuICAgICAgJ0E0MDAnOiAnI2M5NmIyYicsXG4gICAgICAnQTcwMCc6ICcjN2U0MzFiJyxcbiAgICAgICdjb250cmFzdERlZmF1bHRDb2xvcic6ICdsaWdodCcsXG4gICAgICAnY29udHJhc3REYXJrQ29sb3JzJzogJzUwIDEwMCAyMDAgMzAwIEExMDAgQTIwMCdcbiAgICB9KTtcbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxuICAgICAgLnByaW1hcnlQYWxldHRlKCdwcmltYXJ5JylcbiAgICAgIC5hY2NlbnRQYWxldHRlKCdhY2NlbnQnKVxuICAgICAgLndhcm5QYWxldHRlKCd3YXJuJyk7XG4gIH1cbn0pKCk7XG4iLCIvKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGV4YW1wbGVGaWx0ZXJcbiAqIEBkZXNjcmlwdGlvbiBcbiAqIFxuICogRmlsdHJvIGRlIGVqZW1wbG9cbiAqIFxuICovXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdBbnlEYXlCdWRkeUFkcycpXG4gICAgICAgIC5maWx0ZXIoJ2ZpbHRlcicsIGV4YW1wbGUpO1xuXG4gICAgZnVuY3Rpb24gZXhhbXBsZSgpIHtcbiAgICAgICAgcmV0dXJuIGV4YW1wbGVGaWx0ZXI7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGV4YW1wbGVGaWx0ZXIocGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgICAgICB9XG4gICAgfVxuXG59KSgpOyIsIi8qKlxuICogQG5nZG9jIGNvbnRyb2xsZXJcbiAqIEBuYW1lIEhvbWVDb250cm9sbGVyXG4gKiBAcmVxdWlyZXMgJHJvb3RTY29wZVxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogTWFuZWphIGVsIGNvbXBvcnRhbWllbnRvIGRlIGxhIHZpc3RhIHByaW5jaXBhbFxuICpcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnQW55RGF5QnVkZHlBZHMnKVxuICAgIC5jb250cm9sbGVyKCdIb21lQ29udHJvbGxlcicsIEhvbWVDb250cm9sbGVyKTtcblxuICBIb21lQ29udHJvbGxlci4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJ107XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIEhvbWVDb250cm9sbGVyKCRyb290U2NvcGUpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnRpdGxlID0gJ0hvbWUgQ29udHJvbGxlcic7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7fVxuICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ0FueURheUJ1ZGR5QWRzJylcbiAgICAuZGlyZWN0aXZlKCdhZGJPcmRlcnNDYW1wYWlnbicsIGRpcmVjdGl2ZSk7XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGRpcmVjdGl2ZSgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJ2Fzc2V0cy92aWV3cy9vcmRlcnMvb3JkZXJzLmNhbXBhaWduLmh0bWwnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgb3B0aW9uczogJz0nLFxuICAgICAgICBmb3JtOiAnPScsXG4gICAgICAgIHRvdGFsOiAnPSdcbiAgICAgIH0sXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICAgIGNvbnRyb2xsZXI6IENvbnRyb2xsZXIsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcblxuICAgIH1cbiAgfVxuXG4gIENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGh0dHAnLCAnJHEnXTtcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gQ29udHJvbGxlcigkaHR0cCwgJHEpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXG4gICAgfVxuICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ0FueURheUJ1ZGR5QWRzJylcbiAgICAuZGlyZWN0aXZlKCdhZGJPcmRlcnNDaGVja291dCcsIGRpcmVjdGl2ZSk7XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGRpcmVjdGl2ZSgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJ2Fzc2V0cy92aWV3cy9vcmRlcnMvb3JkZXJzLmNoZWNrb3V0Lmh0bWwnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgb3B0aW9uczogJz0nLFxuICAgICAgICBmb3JtOiAnPScsXG4gICAgICAgIHRvdGFsOiAnPSdcbiAgICAgIH0sXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICAgIGNvbnRyb2xsZXI6IENvbnRyb2xsZXIsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcblxuICAgIH1cbiAgfVxuXG4gIENvbnRyb2xsZXIuJGluamVjdCA9IFsnXycsICdicmFpbnRyZWUnLCAnJHNjb3BlJywnJGh0dHAnLCAnJHEnLCAnRGF0YVNlcnZpY2UnXTtcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gQ29udHJvbGxlcihfLCBicmFpbnRyZWUsICRzY29wZSwgJGh0dHAsICRxLCBEYXRhU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY2hlY2tvdXQgPSB7fTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIERhdGFTZXJ2aWNlLmdldENsaWVudFRva2VuKCkudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgc2V0dXBHYXRld2F5KHJlcy5jbGllbnRUb2tlbik7XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0dXBHYXRld2F5KHRva2VuKSB7XG4gICAgICBicmFpbnRyZWUuc2V0dXAodG9rZW4sICdjdXN0b20nLCB7XG4gICAgICAgIHBheXBhbDoge1xuICAgICAgICAgIGNvbnRhaW5lcjogJ3BheXBhbC1jb250YWluZXInLFxuICAgICAgICAgIHNpbmdsZVVzZTogdHJ1ZSxcbiAgICAgICAgICBhbW91bnQ6IDEwLjAwLFxuICAgICAgICAgIGN1cnJlbmN5OiAnVVNEJyxcbiAgICAgICAgICBsb2NhbGU6ICdlbl91cycsXG4gICAgICAgICAgZW5hYmxlU2hpcHBpbmdBZGRyZXNzOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIG9uUGF5bWVudE1ldGhvZFJlY2VpdmVkOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICBkb1NvbWV0aGluZ1dpdGhUaGVOb25jZShvYmoubm9uY2UpO1xuICAgICAgICB9LFxuICAgICAgICBvblJlYWR5OiBmdW5jdGlvbihpbnRlZ3JhdGlvbikge1xuICAgICAgICAgIHZtLmNoZWNrb3V0ID0gaW50ZWdyYXRpb247XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRvU29tZXRoaW5nV2l0aFRoZU5vbmNlKHJlcykge1xuICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICB9XG5cbiAgICAvLyAvLyBXaGVuIHlvdSBhcmUgcmVhZHkgdG8gdGVhciBkb3duIHlvdXIgaW50ZWdyYXRpb25cbiAgICAvLyBjaGVja291dC50ZWFyZG93bihmdW5jdGlvbigpIHtcbiAgICAvLyAgIGNoZWNrb3V0ID0gbnVsbDtcbiAgICAvLyAgIC8vIGJyYWludHJlZS5zZXR1cCBjYW4gc2FmZWx5IGJlIHJ1biBhZ2FpbiFcbiAgICAvLyB9KTtcblxuICAgICRzY29wZS4kd2F0Y2goJ3ZtLmNoZWNrb3V0JywgZnVuY3Rpb24oYywgbykge1xuICAgICAgaWYgKCFjKSByZXR1cm47XG5cbiAgICAgIGNvbnNvbGUubG9nKGMpO1xuICAgIH0pO1xuICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ0FueURheUJ1ZGR5QWRzJylcbiAgICAuZGlyZWN0aXZlKCdhZGJPcmRlcnNDdXN0b21lcicsIGRpcmVjdGl2ZSk7XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGRpcmVjdGl2ZSgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJ2Fzc2V0cy92aWV3cy9vcmRlcnMvb3JkZXJzLmN1c3RvbWVyLmh0bWwnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgb3B0aW9uczogJz0nLFxuICAgICAgICBmb3JtOiAnPScsXG4gICAgICAgIHRvdGFsOiAnPSdcbiAgICAgIH0sXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICAgIGNvbnRyb2xsZXI6IENvbnRyb2xsZXIsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcblxuICAgIH1cbiAgfVxuXG4gIENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGh0dHAnLCAnJHEnXTtcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gQ29udHJvbGxlcigkaHR0cCwgJHEpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXG4gICAgfVxuICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ0FueURheUJ1ZGR5QWRzJylcbiAgICAuY29udHJvbGxlcignT3JkZXJzQ29udHJvbGxlcicsIENvbnRyb2xsZXIpO1xuXG4gIENvbnRyb2xsZXIuJGluamVjdCA9IFsnXycsICckc2NvcGUnLCAnJG1kRGlhbG9nJywgJ0RhdGFTZXJ2aWNlJ107XG5cbiAgZnVuY3Rpb24gQ29udHJvbGxlcihfLCAkc2NvcGUsICRtZERpYWxvZywgRGF0YVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgdm0ub3BlbkltYWdlID0gb3BlbkltYWdlO1xuICAgIHZtLmFkZCA9IGFkZDtcbiAgICB2bS50b3RhbCA9IDA7XG5cbiAgICB2bS5vcHRpb25zID0ge1xuICAgICAgdGFyZ2V0OiB7XG4gICAgICAgIGRpc3BsYXk6IFtdLFxuICAgICAgICBtZWRpYTogW10sXG4gICAgICAgIGltcHJlc3Npb25zVW5pdHM6IFtdLFxuICAgICAgICBpbXByZXNzaW9uc1RpbWU6IFtdLFxuICAgICAgICBkaXN0YW5jZTogW10sXG4gICAgICAgIGFnZTogW10sXG4gICAgICAgIGdlbmRlcjogW11cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdm0uZm9ybSA9IHtcbiAgICAgIG1lZGlhOiB7fSxcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgZGlzcGxheToge30sXG4gICAgICAgIGltcHJlc3Npb25zOiB7fSxcbiAgICAgICAgZGlzdGFuY2U6IHt9LFxuICAgICAgICBhZ2U6IHt9LFxuICAgICAgICBnZW5kZXI6IHt9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgRGF0YVNlcnZpY2UuZ2V0T3B0aW9ucygpLnRoZW4oZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwKTtcbiAgICAgICAgdm0ub3B0aW9ucy50YXJnZXQgPSBkb19tZXJnZShyZXNwKTtcbiAgICAgICAgY29uc29sZS5sb2codm0uZm9ybSk7XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBkb19tZXJnZShyb2xlcykge1xuXG4gICAgICAvLyBDdXN0b20gbWVyZ2UgZnVuY3Rpb24gT1JzIHRvZ2V0aGVyIG5vbi1vYmplY3QgdmFsdWVzLCByZWN1cnNpdmVseVxuICAgICAgLy8gY2FsbHMgaXRzZWxmIG9uIE9iamVjdHMuXG4gICAgICB2YXIgbWVyZ2VyID0gZnVuY3Rpb24oYSwgYikge1xuICAgICAgICBpZiAoXy5pc09iamVjdChhKSkge1xuICAgICAgICAgIHJldHVybiBfLm1lcmdlKHt9LCBhLCBiLCBtZXJnZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBhIHx8IGI7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIEFsbG93IHJvbGVzIHRvIGJlIHBhc3NlZCB0byBfLm1lcmdlIGFzIGFuIGFycmF5IG9mIGFyYml0cmFyeSBsZW5ndGhcbiAgICAgIHZhciBhcmdzID0gXy5mbGF0dGVuKFt7fSwgcm9sZXMsIG1lcmdlcl0pO1xuICAgICAgcmV0dXJuIF8ubWVyZ2UuYXBwbHkoXywgYXJncyk7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBvcGVuSW1hZ2UoJGV2ZW50LCBpbWFnZSkge1xuICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICBmdWxsc2NyZWVuOiB0cnVlLFxuICAgICAgICB0YXJnZXRFdmVudDogJGV2ZW50LFxuICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9zaGFyZWQvbGF5b3V0L2ltYWdlTW9kYWwuaHRtbCcsXG4gICAgICAgIGxvY2Fsczoge1xuICAgICAgICAgIGltYWdlOiBpbWFnZVxuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyOiBbJyRzY29wZScsICdpbWFnZScsIGZ1bmN0aW9uKHNjb3BlLCBpbWFnZSkge1xuICAgICAgICAgIHNjb3BlLmltYWdlID0gaW1hZ2U7XG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGFkZCgpIHtcbiAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9hZC9hZHZlcnRpc2VtZW50TW9kYWwuaHRtbCcsXG4gICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWUsXG4gICAgICAgIGZ1bGxzY3JlZW46IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgICRzY29wZS4kd2F0Y2goJ3ZtLmZvcm0nLCBmdW5jdGlvbihjLCBvKSB7XG4gICAgICBjb25zb2xlLmxvZyhjKTtcblxuICAgICAgdm0udG90YWwgPSBjLm1lZGlhLmhhc093blByb3BlcnR5KCdmZWUnKT9jLm1lZGlhLmZlZTowO1xuXG4gICAgICBfLm1hcChjLm9wdGlvbnMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ2ZlZScpKXtcbiAgICAgICAgICAgIHZtLnRvdGFsICs9ICB2bS50b3RhbCAqIGl0ZW0uZmVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ2Rpc2NvdW50Jykpe1xuICAgICAgICAgICAgdm0udG90YWwgLT0gdm0udG90YWwgKiBpdGVtLmRpc2NvdW50O1xuICAgICAgICB9XG5cbiAgICAgIH0pXG4gICAgfSwgdHJ1ZSlcblxuICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ0FueURheUJ1ZGR5QWRzJylcbiAgICAuZGlyZWN0aXZlKCdhZGJEaXNwbGF5Q2hvb3NlcicsIGRpcmVjdGl2ZSk7XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGRpcmVjdGl2ZSgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJ2Fzc2V0cy92aWV3cy9vcmRlcnMvb3JkZXJzLmRpc3BsYXkuaHRtbCcsXG4gICAgICBzY29wZToge1xuICAgICAgICBvcHRpb25zOiAnPScsXG4gICAgICAgIGZvcm06ICc9JyxcbiAgICAgICAgdG90YWw6ICc9J1xuICAgICAgfSxcbiAgICAgIGxpbms6IGxpbmtGdW5jLFxuICAgICAgY29udHJvbGxlcjogQ29udHJvbGxlcixcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuXG4gICAgfVxuICB9XG5cbiAgQ29udHJvbGxlci4kaW5qZWN0ID0gWyd1aUdtYXBHb29nbGVNYXBBcGknLCAndWlHbWFwSXNSZWFkeScsICckcScsICckc2NvcGUnLCAnJHRpbWVvdXQnLCAnRHJvcHpvbmVTZXJ2aWNlJ107XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIENvbnRyb2xsZXIodWlHbWFwR29vZ2xlTWFwQXBpLCB1aUdtYXBJc1JlYWR5LCAkcSwgJHNjb3BlLCAkdGltZW91dCwgRHJvcHpvbmVTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2YXIgUGxhY2VzID0gbnVsbDtcbiAgICB2YXIgRGlyZWN0aW9uUmVuZGVyZXIgPSBudWxsO1xuICAgIHZhciBEaXJlY3Rpb25zU2VydmljZSA9IG51bGw7XG4gICAgdmFyIFBsYWNlc0F1dG9jb21wbGV0ZSA9IG51bGw7XG5cbiAgICB2bS5jb250cm9sID0ge1xuICAgICAgdXBsb2FkaW5nOiBmYWxzZVxuICAgIH1cbiAgICB2bS5tYXAgPSB7XG4gICAgICBjZW50ZXI6IHtcbiAgICAgICAgbGF0aXR1ZGU6IDQ1LjUwMTc0NTAyODE2NjY3LFxuICAgICAgICBsb25naXR1ZGU6IC03My41NzAzODgxODI5OTc3XG4gICAgICB9LFxuICAgICAgem9vbTogMTQsXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIHNjcm9sbHdoZWVsOiB0cnVlXG4gICAgICB9LFxuICAgICAgbWFwTWFya2VyOiB0cnVlLFxuICAgICAgZGlzYWJsZURlZmF1bHRVSTogdHJ1ZSxcbiAgICAgIGNvbnRyb2w6IHt9LFxuICAgICAgZXZlbnRzOiB7XG4gICAgICAgIGNsaWNrOiBjbGlja01hcCxcbiAgICAgICAgaWRsZTogYm91bmRzQ2hhbmdlZFxuICAgICAgfVxuICAgIH07XG5cbiAgICB2bS5pbmZvID0ge1xuICAgICAgbmFtZTogJ1ZlbnVlIG5hbWUnLFxuICAgICAgYWRkcmVzczogJycsXG4gICAgICBpY29uOiAnJyxcbiAgICB9XG5cbiAgICB2bS5tYXJrZXIgPSB7XG4gICAgICBpZDogMCxcbiAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgIGxhdGl0dWRlOiA0NS41MDE3NDUwMjgxNjY2NyxcbiAgICAgICAgbG9uZ2l0dWRlOiAtNzMuNTcwMzg4MTgyOTk3N1xuICAgICAgfSxcbiAgICAgIHNob3c6IGZhbHNlLFxuICAgIH1cblxuICAgIHZtLmRyb3B6b25lID0gRHJvcHpvbmVTZXJ2aWNlLmNyZWF0ZShmdW5jdGlvbihmaWxlLCByZXNwb25zZSkge1xuICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uuc2VjdXJlX3VybCk7XG4gICAgICAgIHZtLmNvbnRyb2wudXBsb2FkaW5nID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZtLmNvbnRyb2wudXBsb2FkaW5nID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXG4gICAgICAkcS5hbGwoW3VpR21hcEdvb2dsZU1hcEFwaSwgdWlHbWFwSXNSZWFkeS5wcm9taXNlKDEpXSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICB2YXIgbWFwID0gcmVzcG9uc2VbMF07XG4gICAgICAgIHZhciBpbnN0YW5jZSA9IHJlc3BvbnNlWzFdWzBdLm1hcDtcblxuICAgICAgICB2bS53aW5kb3cgPSB7XG4gICAgICAgICAgcGl4ZWxPZmZzZXQ6IG5ldyBtYXAuU2l6ZSgwLCAtNDApLFxuICAgICAgICAgIGNsb3NlQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdm0ubWFya2VyLnNob3cgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgUGxhY2VzQXV0b2NvbXBsZXRlID0gbmV3IG1hcC5wbGFjZXMuQXV0b2NvbXBsZXRlU2VydmljZSgpO1xuICAgICAgICBEaXJlY3Rpb25zU2VydmljZSA9IG5ldyBtYXAuRGlyZWN0aW9uc1NlcnZpY2UoKTtcbiAgICAgICAgRGlyZWN0aW9uUmVuZGVyZXIgPSBuZXcgbWFwLkRpcmVjdGlvbnNSZW5kZXJlcigpO1xuICAgICAgICB2bS5tYXAuaW5zdGFuY2UgPSBpbnN0YW5jZTtcbiAgICAgICAgRGlyZWN0aW9uUmVuZGVyZXIuc2V0TWFwKHZtLm1hcC5pbnN0YW5jZSk7XG4gICAgICAgIFBsYWNlcyA9IG5ldyBtYXAucGxhY2VzLlBsYWNlc1NlcnZpY2Uodm0ubWFwLmluc3RhbmNlKTtcbiAgICAgICAgdm0ucGxhY2VzUmVhZHkgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZygncmVhZHknKTtcbiAgICAgICAgLy9nZXRMb2NhdGlvbigpO1xuXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB2bS5jbGlja01hcmtlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgY29uc29sZS5sb2coJ2NsaWNrJyk7XG4gICAgICB2bS5tYXJrZXIuc2hvdyA9ICF2bS5tYXJrZXIuc2hvdztcbiAgICAgICRzY29wZS4kYXBwbHkoKTtcblxuICAgIH1cblxuICAgIHZtLmF1dG9jb21wbGV0ZUFkZHJlc3MgPSBmdW5jdGlvbihhZGRyZXNzKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICBQbGFjZXNBdXRvY29tcGxldGUuZ2V0UXVlcnlQcmVkaWN0aW9ucyh7XG4gICAgICAgIGlucHV0OiBhZGRyZXNzXG4gICAgICB9LCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSA/IF8uZmlsdGVyKGRhdGEsICdwbGFjZV9pZCcpIDogW10pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG5cbiAgICB2bS5nZXRQbGFjZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgY29uc29sZS5sb2codm0uaW5mby5wbGFjZSk7XG5cbiAgICAgIGlmICghdm0uaW5mby5wbGFjZSkgcmV0dXJuO1xuXG4gICAgICBQbGFjZXMuZ2V0RGV0YWlscyh7XG4gICAgICAgIHBsYWNlSWQ6IHZtLmluZm8ucGxhY2UucGxhY2VfaWRcbiAgICAgIH0sIGZ1bmN0aW9uKHBsYWNlLCBzdGF0dXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocGxhY2UsIHN0YXR1cyk7XG5cbiAgICAgICAgdm0ubWFya2VyID0ge1xuICAgICAgICAgIGlkOiBEYXRlLm5vdygpLFxuICAgICAgICAgIG5hbWU6IHBsYWNlLm5hbWUsXG4gICAgICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiBwYXJzZUZsb2F0KHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCgpKSxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogcGFyc2VGbG9hdChwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKSksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzaG93OiB0cnVlXG4gICAgICAgIH07XG5cblxuICAgICAgICBjZW50ZXJNYXAodm0ubWFwLmluc3RhbmNlLCB2bS5tYXJrZXIubG9jYXRpb24sIG51bGwsIHRydWUpO1xuICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gY2VudGVyTWFwKG1hcCwgbG9jYXRpb24sIG9mZnNldCwgc2Nyb2xsKSB7XG4gICAgICBjb25zb2xlLmxvZyhsb2NhdGlvbik7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgbWFwLnBhblRvKG5ldyBnb29nbGUubWFwcy5MYXRMbmcobG9jYXRpb24ubGF0aXR1ZGUsIGxvY2F0aW9uLmxvbmdpdHVkZSkpO1xuICAgICAgICBpZiAob2Zmc2V0KSBtYXAucGFuQnkoMCwgLTIwMCk7XG4gICAgICB9LCAxMDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsaWNrTWFwKG1hcCwgZXZlbnROYW1lLCBvcmlnaW5hbEV2ZW50QXJncykge1xuICAgICAgdmFyIGUgPSBvcmlnaW5hbEV2ZW50QXJnc1swXTtcbiAgICAgIHZhciBsYXQgPSBlLmxhdExuZy5sYXQoKSxcbiAgICAgICAgbG9uID0gZS5sYXRMbmcubG5nKCk7XG4gICAgICB2bS5tYXJrZXIgPSB7XG4gICAgICAgIGlkOiBEYXRlLm5vdygpLFxuICAgICAgICBsb2NhdGlvbjoge1xuICAgICAgICAgIGxhdGl0dWRlOiBsYXQsXG4gICAgICAgICAgbG9uZ2l0dWRlOiBsb25cbiAgICAgICAgfSxcbiAgICAgICAgc2hvdzogZmFsc2VcbiAgICAgIH07XG4gICAgICAkc2NvcGUuJGFwcGx5KCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYm91bmRzQ2hhbmdlZCgpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdib3VuZHMgY2hhbmdlZCcpO1xuICAgICAgaWYgKCF2bS5tYXAuaW5zdGFuY2UpIHJldHVybjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRMb2NhdGlvbigpIHtcbiAgICAgIGlmICh2bS5kYXRhLmxvY2F0aW9uKSB7XG4gICAgICAgIHZtLmxvY2F0aW9uID0ge1xuICAgICAgICAgIGxhdDogcGFyc2VGbG9hdCh2bS5kYXRhLmxvY2F0aW9uWzBdKSxcbiAgICAgICAgICBsbmc6IHBhcnNlRmxvYXQodm0uZGF0YS5sb2NhdGlvblsxXSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvL1xuICAgICAgLy8gVXRpbFNlcnZpY2UuZ2V0TG9jYXRpb24oKVxuICAgICAgLy8gICAudGhlbihmdW5jdGlvbihsb2NhdGlvbikge1xuICAgICAgLy8gICAgIHZtLmxvY2F0aW9uID0gbG9jYXRpb247XG4gICAgICAvLyAgICAgLy9jZW50ZXJNYXAodm0ubWFwLmluc3RhbmNlLCB2bS5sb2NhdGlvbik7XG4gICAgICAvLyAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgLy8gICAgIGlmICgkcm9vdFNjb3BlLnVzZXIuYWRkcmVzc1BsYWNlKVxuICAgICAgLy8gICAgICAgZ2V0UGxhY2UoJHJvb3RTY29wZS51c2VyLmFkZHJlc3NQbGFjZS5wbGFjZV9pZCk7XG4gICAgICAvL1xuICAgICAgLy8gICB9KS5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgLy8gICAgIC8vdm0ubWFwVmlzaWJsZSA9IHRydWU7XG4gICAgICAvLyAgICAgLy92bS5hY3Rpdml0aWVzLnB1c2gobG9jYXRpb25NYXJrZXIoKSk7XG4gICAgICAvLyAgICAgY29uc29sZS5sb2coJ2xvY2F0aW9uJyk7XG4gICAgICAvLyAgIH0pO1xuXG4gICAgfVxuICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ0FueURheUJ1ZGR5QWRzJylcbiAgICAuc2VydmljZSgnRGF0YVNlcnZpY2UnLCBkYXRhU2VydmljZSk7XG5cbiAgZGF0YVNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCAnJHEnLCAnYmFzZUFwaSddO1xuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBkYXRhU2VydmljZSgkaHR0cCwgJHEsIGJhc2VBcGkpIHtcbiAgICB2YXIgZGF0YVNlcnZpY2UgPSB7XG4gICAgICBnZXRPcHRpb25zOiBnZXRPcHRpb25zLFxuICAgICAgZ2V0Q2xpZW50VG9rZW4gOiBnZXRDbGllbnRUb2tlblxuICAgIH1cblxuICAgIHJldHVybiBkYXRhU2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGdldE9wdGlvbnMoKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAkaHR0cCh7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIHVybDogYmFzZUFwaSArICcvYWR2ZXJ0aXNtZW50L29wdGlvbnMvJ1xuICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZykge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xuICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDbGllbnRUb2tlbigpIHtcbiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICRodHRwKHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDoxMzM4L2NvbW1lcmNlL2NsaWVudFRva2VuLydcbiAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcbiAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycik7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuXG5cbiAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdBbnlEYXlCdWRkeUFkcycpXG4gICAgLnNlcnZpY2UoJ0Ryb3B6b25lU2VydmljZScsIERyb3B6b25lU2VydmljZSk7XG5cblxuICBmdW5jdGlvbiBEcm9wem9uZVNlcnZpY2UoKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBjcmVhdGU6IGNyZWF0ZSxcbiAgICAgIGNyZWF0ZU11bHRpcGxlOiBjcmVhdGVNdWx0aXBsZVxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZShzdWNjZXNzLCBzZW5kaW5nLCByZW1vdmVkZmlsZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLmNsb3VkaW5hcnkuY29tL3YxXzEvY2xvdWQ5L2ltYWdlL3VwbG9hZCcsXG4gICAgICAgICAgdXBsb2FkTXVsdGlwbGU6IGZhbHNlLFxuICAgICAgICAgIG1heEZpbGVzOiAxLFxuICAgICAgICAgIGFjY2VwdGVkRmlsZXM6ICdpbWFnZS8qJyxcbiAgICAgICAgICBkaWN0RGVmYXVsdE1lc3NhZ2U6ICdEcm9wIGZpbGUgb3IgY2xpY2sgaGVyZSB0byB1cGxvYWQnLFxuICAgICAgICAgIGFkZFJlbW92ZUxpbmtzOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIGV2ZW50SGFuZGxlcnM6IHtcbiAgICAgICAgICBzZW5kaW5nOiBmdW5jdGlvbihmaWxlLCB4aHIsIGZvcm1EYXRhKSB7XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2FwaV9rZXknLCA4Mzk5ODgzMzMxNTM1NjcpO1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd0aW1lc3RhbXAnLCBEYXRlLm5vdygpIC8gMTAwMCB8IDApO1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd1cGxvYWRfcHJlc2V0JywgJ3NtMmV2NG51Jyk7XG4gICAgICAgICAgICBpZiAoc2VuZGluZykgc2VuZGluZygpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3VjY2Vzczogc3VjY2VzcyxcbiAgICAgICAgICByZW1vdmVkZmlsZTogcmVtb3ZlZGZpbGVcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVNdWx0aXBsZShtYXhGaWxlcywgc3VjY2Vzcywgc2VuZGluZykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLmNsb3VkaW5hcnkuY29tL3YxXzEvY2xvdWQ5L2ltYWdlL3VwbG9hZCcsXG4gICAgICAgICAgbWF4RmlsZXM6IG1heEZpbGVzLFxuICAgICAgICAgIGFjY2VwdGVkRmlsZXM6ICdpbWFnZS8qJyxcbiAgICAgICAgICBkaWN0RGVmYXVsdE1lc3NhZ2U6ICdEcm9wIGZpbGVzIG9yIGNsaWNrIGhlcmUgdG8gdXBsb2FkJ1xuICAgICAgICB9LFxuICAgICAgICBldmVudEhhbmRsZXJzOiB7XG4gICAgICAgICAgc2VuZGluZzogZnVuY3Rpb24oZmlsZSwgeGhyLCBmb3JtRGF0YSkge1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdhcGlfa2V5JywgODM5OTg4MzMzMTUzNTY3KTtcbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgndGltZXN0YW1wJywgRGF0ZS5ub3coKSAvIDEwMDAgfCAwKTtcbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgndXBsb2FkX3ByZXNldCcsICdzbTJldjRudScpO1xuICAgICAgICAgICAgaWYgKHNlbmRpbmcpIHNlbmRpbmcoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3NcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxufSkoKTtcbiIsIi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lIHVzZXJzZXJ2aWNlXG4gKiBAcmVxdWlyZXMgJGh0dHAsICRxXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBFc3RlIHNlcnZpY2lvIGVzIHVzYWRvIHBhcmEgbWFuZWphciBsYXMgc2VzaW9uZXMgZGUgdXN1YXJpby5cbiAqXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ0FueURheUJ1ZGR5QWRzJylcbiAgICAuZmFjdG9yeSgndXNlclNlcnZpY2UnLCB1c2VyU2VydmljZSk7XG5cbiAgdXNlclNlcnZpY2UuJGluamVjdCA9IFsnQVBJX1VSTCcsICckaHR0cCcsICckcSddO1xuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiB1c2VyU2VydmljZShBUElfVVJMLCAkaHR0cCwgJHEpIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGlzTG9nZ2VkSW46IGlzTG9nZ2VkSW4sXG4gICAgICBsb2dpbjogbG9naW5cbiAgICB9O1xuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgLyoqXG4gICAgICogVmVyaWZpY2Egc2kgZWwgdXN1YXJpbyBlc3TDoSBhdXRlbnRpY2Fkby5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIEN1YW5kbyBoYXkgdW4gdXN1YXJpbyBhdXRlbnRpY2Fkby5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0xvZ2dlZEluKCkge1xuICAgICAgdmFyIHVzZXIgPSAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyO1xuICAgICAgcmV0dXJuICEhdXNlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWYWxpZGEgbGFzIGNyZWRlbmNpYWxlcyBkZWwgdXN1YXJpbyBjb24gZWwgc2Vydmlkb3IuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSAgcGFyYW1zIENyZWRlbmNpYWxlcy5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSAgICAgICAgUHJvbWVzYSBkZSBsYSBzb2xpY2l0dWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbG9naW4ocGFyYW1zKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAkaHR0cCh7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICB1cmw6IEFQSV9VUkwgKyAnbG9naW4nLFxuICAgICAgICBkYXRhOiBwYXJhbXNcbiAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyID0gcmVzcC51c2VyO1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3ApO1xuICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGRlZmVycmVkLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cblxuICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnQW55RGF5QnVkZHlBZHMnKVxuICAgICAgICAuZGlyZWN0aXZlKCdoZWFkZXJEaXJlY3RpdmUnLCBoZWFkZXJEaXJlY3RpdmUpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gaGVhZGVyRGlyZWN0aXZlKCkge1xuICAgICAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Fzc2V0cy92aWV3cy9oZWFkZXIvaGVhZGVyLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogaGVhZGVyQ29udHJvbGxlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuICAgIH1cblxuICAgIGhlYWRlckNvbnRyb2xsZXIuJGluamVjdCA9IFtdO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gaGVhZGVyQ29udHJvbGxlcigpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdoZWFkZXIgQWN0aXZhdGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnQW55RGF5QnVkZHlBZHMnKVxuICAgICAgICAuZGlyZWN0aXZlKCdmb290ZXJEaXJlY3RpdmUnLCBmb290ZXJEaXJlY3RpdmUpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gZm9vdGVyRGlyZWN0aXZlKCkge1xuICAgICAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Fzc2V0cy92aWV3cy9mb290ZXIvZm9vdGVyLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogZm9vdGVyQ29udHJvbGxlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuICAgIH1cblxuICAgIGZvb3RlckNvbnRyb2xsZXIuJGluamVjdCA9IFtdO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gZm9vdGVyQ29udHJvbGxlcigpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdmb290ZXIgQWN0aXZhdGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
